<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesla Streaming Launcher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            width: 95%;
            height: 95vh;
            max-width: 1600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 20px;
            width: 100%;
            height: 100%;
        }

        .service-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            padding: 20px;
            background: #0a0a0a;
            border-radius: 12px;
            border: 1px solid #222;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .service-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .service-link:hover {
            border-color: #444;
            transform: scale(1.02);
        }

        .service-link:hover::before {
            opacity: 1;
        }

        .icon {
            width: 80px;
            height: 80px;
            margin-bottom: 15px;
        }

        .service-name {
            color: #fff;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            letter-spacing: 0.3px;
        }

        /* Service-specific colors */
        .netflix { border-color: #E50914; }
        .netflix:hover { border-color: #E50914; box-shadow: 0 0 20px rgba(229, 9, 20, 0.3); }
        
        .plex { border-color: #E5A00D; }
        .plex:hover { border-color: #E5A00D; box-shadow: 0 0 20px rgba(229, 160, 13, 0.3); }
        
        .youtube { border-color: #FF0000; }
        .youtube:hover { border-color: #FF0000; box-shadow: 0 0 20px rgba(255, 0, 0, 0.3); }
        
        .tv2 { border-color: #00B2A9; }
        .tv2:hover { border-color: #00B2A9; box-shadow: 0 0 20px rgba(0, 178, 169, 0.3); }
        
        .nrk { border-color: #0071BC; }
        .nrk:hover { border-color: #0071BC; box-shadow: 0 0 20px rgba(0, 113, 188, 0.3); }
        
        .viaplay { border-color: #6B3FA0; }
        .viaplay:hover { border-color: #6B3FA0; box-shadow: 0 0 20px rgba(107, 63, 160, 0.3); }
        
        .hbo { border-color: #7B3CFF; }
        .hbo:hover { border-color: #7B3CFF; box-shadow: 0 0 20px rgba(123, 60, 255, 0.3); }
        
        .apple { border-color: #555; }
        .apple:hover { border-color: #888; box-shadow: 0 0 20px rgba(136, 136, 136, 0.3); }
        
        .globo { border-color: #0047BB; }
        .globo:hover { border-color: #0047BB; box-shadow: 0 0 20px rgba(0, 71, 187, 0.3); }

        .solitaire { border-color: #2563eb; }
        .solitaire:hover { border-color: #3b82f6; box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }

        .fullscreen-btn { border-color: #333; }
        .fullscreen-btn:hover { border-color: #666; box-shadow: 0 0 20px rgba(102, 102, 102, 0.3); }

        .games { border-color: #8B1538; }
        .games:hover { border-color: #DC2626; box-shadow: 0 0 20px rgba(139, 21, 56, 0.5); }

        /* Temporary dimension display */
        #dimension-display {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: #0f0;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            z-index: 9999;
            border: 1px solid #0f0;
        }

        /* Game selection modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: #0a0a0a;
            border-radius: 16px;
            border: 1px solid #333;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            position: relative;
        }

        .modal-header {
            color: #fff;
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 30px;
            letter-spacing: 0.5px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .game-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
            background: #111;
            border-radius: 12px;
            border: 2px solid #222;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .game-option:hover {
            transform: scale(1.05);
            border-color: #444;
        }

        .game-option.isola-option {
            border-color: #8B1538;
        }

        .game-option.isola-option:hover {
            border-color: #DC2626;
            box-shadow: 0 0 30px rgba(139, 21, 56, 0.6);
        }

        .game-option.santorini-option {
            border-color: #4A90E2;
        }

        .game-option.santorini-option:hover {
            border-color: #87CEEB;
            box-shadow: 0 0 30px rgba(74, 144, 226, 0.6);
        }

        .game-icon {
            width: 100px;
            height: 100px;
            margin-bottom: 15px;
        }

        .game-name {
            color: #fff;
            font-size: 20px;
            font-weight: 500;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #888;
            font-size: 32px;
            cursor: pointer;
            transition: color 0.2s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: #fff;
        }
    </style>
</head>
<body>
    <!-- Temporary dimension display -->
    <div id="dimension-display"></div>

    <div class="container">
        <div class="grid">
            <!-- Row 1 -->
            <a href="https://www.netflix.com" class="service-link netflix" data-url="https://www.netflix.com">
                <img src="icons/netflix.svg" class="icon" alt="Netflix">
                <div class="service-name">Netflix</div>
            </a>
            <a href="https://app.plex.tv" class="service-link plex" data-url="https://app.plex.tv">
                <img src="icons/plex.svg" class="icon" alt="Plex">
                <div class="service-name">Plex</div>
            </a>
            <a href="https://www.youtube.com" class="service-link youtube" data-url="https://www.youtube.com">
                <img src="icons/youtube.svg" class="icon" alt="YouTube">
                <div class="service-name">YouTube</div>
            </a>

            <!-- Row 2 -->
            <a href="https://www.tv2.no" class="service-link tv2" data-url="https://www.tv2.no">
                <img src="icons/tv2.svg" class="icon" alt="TV2">
                <div class="service-name">TV2</div>
            </a>
            <a href="https://tv.nrk.no" class="service-link nrk" data-url="https://tv.nrk.no">
                <img src="icons/nrk.svg" class="icon" alt="NRK">
                <div class="service-name">NRK</div>
            </a>
            <a href="https://viaplay.no" class="service-link viaplay" data-url="https://viaplay.no">
                <img src="icons/viaplay.svg" class="icon" alt="Viaplay">
                <div class="service-name">Viaplay</div>
            </a>

            <!-- Row 3 -->
            <a href="https://www.hbomax.com" class="service-link hbo" data-url="https://www.hbomax.com">
                <img src="icons/hbomax.svg" class="icon" alt="HBO Max">
                <div class="service-name">HBO Max</div>
            </a>
            <a href="https://tv.apple.com" class="service-link apple" data-url="https://tv.apple.com">
                <img src="icons/appletvplus.svg" class="icon" alt="Apple TV">
                <div class="service-name">Apple TV</div>
            </a>
            <a href="https://globoplay.globo.com" class="service-link globo" data-url="https://globoplay.globo.com">
                <img src="icons/globo.svg" class="icon" alt="Globo">
                <div class="service-name">Globo</div>
            </a>

            <!-- Row 4 -->
            <a href="https://kkollsga.github.io/tesla/solitaire.html" class="service-link solitaire" data-url="https://kkollsga.github.io/tesla/solitaire.html">
                <img src="icons/solitaire.svg" class="icon" alt="Solitaire">
                <div class="service-name">Solitaire</div>
            </a>
            <a href="https://kkollsga.github.io/tesla" class="service-link fullscreen-btn" data-url="https://kkollsga.github.io/tesla">
                <svg class="icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M25 25 L25 40 M25 25 L40 25" stroke="#888" stroke-width="4" stroke-linecap="round"/>
                    <path d="M75 25 L75 40 M75 25 L60 25" stroke="#888" stroke-width="4" stroke-linecap="round"/>
                    <path d="M25 75 L25 60 M25 75 L40 75" stroke="#888" stroke-width="4" stroke-linecap="round"/>
                    <path d="M75 75 L75 60 M75 75 L60 75" stroke="#888" stroke-width="4" stroke-linecap="round"/>
                </svg>
                <div class="service-name">Go Fullscreen</div>
            </a>
            <div class="service-link games" id="games-button">
                <svg class="icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Game controller icon -->
                    <path d="M70 35 Q85 35 85 50 Q85 65 70 65 L30 65 Q15 65 15 50 Q15 35 30 35 Z" fill="none" stroke="#8B1538" stroke-width="3"/>
                    <!-- D-pad left -->
                    <rect x="25" y="45" width="8" height="3" fill="#DC2626" rx="1"/>
                    <!-- D-pad right -->
                    <rect x="39" y="45" width="8" height="3" fill="#DC2626" rx="1"/>
                    <!-- D-pad up -->
                    <rect x="34" y="40" width="3" height="8" fill="#DC2626" rx="1"/>
                    <!-- D-pad down -->
                    <rect x="34" y="50" width="3" height="8" fill="#DC2626" rx="1"/>
                    <!-- Button A -->
                    <circle cx="65" cy="48" r="4" fill="#DC2626"/>
                    <!-- Button B -->
                    <circle cx="75" cy="53" r="4" fill="#DC2626"/>
                </svg>
                <div class="service-name">Games</div>
            </div>
        </div>
    </div>

    <!-- Game Selection Modal -->
    <div class="modal-overlay" id="game-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal">&times;</button>
            <div class="modal-header">Select a Game</div>
            <div class="game-grid">
                <a href="https://kkollsga.github.io/tesla/isola.html" class="game-option isola-option" data-url="https://kkollsga.github.io/tesla/isola.html">
                    <svg class="game-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Game board grid -->
                        <rect x="15" y="25" width="70" height="50" fill="none" stroke="#8B1538" stroke-width="2"/>
                        <!-- Grid lines -->
                        <line x1="15" y1="35" x2="85" y2="35" stroke="#8B1538" stroke-width="1"/>
                        <line x1="15" y1="45" x2="85" y2="45" stroke="#8B1538" stroke-width="1"/>
                        <line x1="15" y1="55" x2="85" y2="55" stroke="#8B1538" stroke-width="1"/>
                        <line x1="15" y1="65" x2="85" y2="65" stroke="#8B1538" stroke-width="1"/>
                        <line x1="27" y1="25" x2="27" y2="75" stroke="#8B1538" stroke-width="1"/>
                        <line x1="39" y1="25" x2="39" y2="75" stroke="#8B1538" stroke-width="1"/>
                        <line x1="51" y1="25" x2="51" y2="75" stroke="#8B1538" stroke-width="1"/>
                        <line x1="63" y1="25" x2="63" y2="75" stroke="#8B1538" stroke-width="1"/>
                        <line x1="75" y1="25" x2="75" y2="75" stroke="#8B1538" stroke-width="1"/>
                        <!-- Player pawns -->
                        <circle cx="27" cy="50" r="4" fill="#DC2626"/>
                        <circle cx="75" cy="50" r="4" fill="#111"/>
                    </svg>
                    <div class="game-name">Isola</div>
                </a>
                <a href="https://kkollsga.github.io/tesla/santorini.html" class="game-option santorini-option" data-url="https://kkollsga.github.io/tesla/santorini.html">
                    <svg class="game-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- 5x5 Grid -->
                        <rect x="20" y="30" width="60" height="60" fill="none" stroke="#4A90E2" stroke-width="2"/>
                        <!-- Grid lines -->
                        <line x1="20" y1="42" x2="80" y2="42" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="20" y1="54" x2="80" y2="54" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="20" y1="66" x2="80" y2="66" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="20" y1="78" x2="80" y2="78" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="32" y1="30" x2="32" y2="90" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="44" y1="30" x2="44" y2="90" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="56" y1="30" x2="56" y2="90" stroke="#4A90E2" stroke-width="1"/>
                        <line x1="68" y1="30" x2="68" y2="90" stroke="#4A90E2" stroke-width="1"/>
                        <!-- Building (3 levels) -->
                        <rect x="38" y="64" width="8" height="2" fill="#fff" stroke="#4A90E2" stroke-width="0.5"/>
                        <rect x="39" y="62" width="6" height="2" fill="#fff" stroke="#4A90E2" stroke-width="0.5"/>
                        <rect x="40" y="60" width="4" height="2" fill="#fff" stroke="#4A90E2" stroke-width="0.5"/>
                        <!-- Dome -->
                        <ellipse cx="62" cy="60" rx="4" ry="3" fill="#87CEEB" stroke="#4A90E2" stroke-width="0.5"/>
                        <!-- Workers -->
                        <circle cx="26" cy="36" r="3" fill="#4A90E2" stroke="#fff" stroke-width="1"/>
                        <circle cx="74" cy="84" r="3" fill="#FFA500" stroke="#fff" stroke-width="1"/>
                    </svg>
                    <div class="game-name">Santorini</div>
                </a>
            </div>
        </div>
    </div>

    <script>
        // Temporary dimension display
        function updateDimensions() {
            const display = document.getElementById('dimension-display');
            display.textContent = `${window.innerWidth} x ${window.innerHeight}`;
        }

        window.addEventListener('resize', updateDimensions);
        window.addEventListener('load', updateDimensions);

        const YOUTUBE_REDIRECT_BASE = 'https://www.youtube.com/redirect?q=';

        function isFullscreen() {
            if (document.fullscreenElement || document.webkitFullscreenElement) {
                return true;
            }
            
            const width = window.innerWidth;
            const height = window.innerHeight;
            const isLikelyTeslaFullscreen = (width >= 1800 && height >= 1000) || 
                                             (width >= window.screen.width * 0.95 && 
                                              height >= window.screen.height * 0.95);
            
            return isLikelyTeslaFullscreen;
        }

        function navigateToService(url, event) {
            event.preventDefault();
            
            if (isFullscreen()) {
                window.location.href = url;
            } else {
                window.location.href = YOUTUBE_REDIRECT_BASE + encodeURIComponent(url);
            }
        }

        document.querySelectorAll('.service-link').forEach(link => {
            link.addEventListener('click', function(e) {
                const url = this.getAttribute('data-url');
                // Only navigate if this element has a data-url (not the games button)
                if (url) {
                    navigateToService(url, e);
                }
            });
        });

        document.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
            });
        });

        // Game modal handling
        const gameModal = document.getElementById('game-modal');
        const gamesButton = document.getElementById('games-button');
        const closeModal = document.getElementById('close-modal');

        gamesButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            gameModal.classList.add('active');
        });

        closeModal.addEventListener('click', function() {
            gameModal.classList.remove('active');
        });

        // Close modal when clicking outside the modal content
        gameModal.addEventListener('click', function(e) {
            if (e.target === gameModal) {
                gameModal.classList.remove('active');
            }
        });

        // Handle game option clicks
        document.querySelectorAll('.game-option').forEach(option => {
            option.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                const url = this.getAttribute('data-url');
                navigateToService(url, e);
            });
        });
    </script>
</body>
</html>
